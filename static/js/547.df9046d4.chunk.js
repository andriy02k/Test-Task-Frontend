"use strict";(self.webpackChunktest_task_frontend=self.webpackChunktest_task_frontend||[]).push([[547],{278:(e,t,a)=>{a.d(t,{_e:()=>c,TJ:()=>o,_5:()=>s,_z:()=>l,wi:()=>r});const n=a(213).A.create({baseURL:"http://localhost:8080/api/chats"}),s=async()=>{const{data:e}=await n.get("/");return e},o=async e=>{const{data:t}=await n.get(`/${e}`);return t},r=async(e,t)=>{const{data:a}=await n.put(`/${e}`,t);return a},c=async e=>{const{data:t}=await n.delete(`/${e}`);return t},l=async(e,t)=>{const{data:a}=await n.post(`/${e}/messages`,t);return a}},547:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(43),s=a(216),o=a(278);const r={form_container:"Modal_form_container__h7IDp",title:"Modal_title__gGugG",desc:"Modal_desc__5dSU3",form:"Modal_form__Cg5Yo",input:"Modal_input__ApvCG",button:"Modal_button__Npo+Q"};var c=a(579);const l=e=>{let{children:t,onClose:a,showModal:s,addModal:o}=e;const l=(0,n.useCallback)((e=>{"Escape"===e.code&&a(),e.currentTarget===e.target&&a()}),[a]);return(0,n.useEffect)((()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)})),[l]),(0,c.jsx)("div",{className:s||o?r.backdrop+" "+r.backdropActive:r.backdrop,onClick:l,children:(0,c.jsxs)("div",{className:s||o?r.modalContent+" "+r.modalContentActive:r.modalContent,children:[(0,c.jsx)("button",{className:r.button,onClick:()=>a()}),t]})})},d=e=>{let{chatId:t}=e;const[a,s]=(0,n.useState)(""),[r,l]=(0,n.useState)("");return(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await(0,o.wi)(t,{firstName:a,lastName:r}),s(""),l("")}catch(n){console.error(n)}},children:[(0,c.jsx)("input",{type:"text",value:a,onChange:e=>s(e.target.value),placeholder:"First Name"}),(0,c.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Last Name"}),(0,c.jsx)("button",{type:"submit",children:"Send"})]})},i=()=>{const[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)(""),[i,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(!1),[p,_]=(0,n.useState)(null),[x,C]=(0,n.useState)(!1),j=(0,s.Zp)();(0,n.useEffect)((()=>{(async()=>{try{const e=await(0,o._5)();t(e)}catch(e){console.error(e)}})()}),[i]);const v=()=>{m(!1),C(!1),_(null),u(!i)},g=e.filter((e=>e.firstName.toLowerCase().includes(a.toLowerCase())||e.lastName.toLowerCase().includes(a.toLowerCase()))),w=e=>e&&0!==e.length?e[e.length-1]:" ";return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{type:"text",value:a,onChange:e=>{r(e.target.value)}}),(0,c.jsx)("button",{onClick:()=>C(!x),children:"Create new chat"}),x&&(0,c.jsx)(l,{onClose:v,addModal:x,children:(0,c.jsx)(d,{})}),(0,c.jsxs)("ul",{children:[g.map((e=>{let{firstName:t,lastName:a,_id:n,messages:s}=e;return(0,c.jsxs)("li",{onClick:()=>{return e=n,console.log(e),void j(`/chat/${e}`);var e},children:[t," ",a,(0,c.jsx)("p",{children:w(s).text}),(0,c.jsx)("p",{children:(r=w(s).createdAt,new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))}),(0,c.jsx)("button",{onClick:()=>(_(n),void m(!0)),children:"Edit"}),(0,c.jsx)("button",{onClick:()=>(async e=>{try{await(0,o._e)(e),u(!i)}catch(t){console.error(t)}})(n),children:"Delete"})]},n);var r})),h&&(0,c.jsx)(l,{onClose:v,showModal:h,children:(0,c.jsx)(d,{chatId:p})})]})]})},u=()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i,{}),(0,c.jsx)("div",{children:(0,c.jsx)(s.sv,{})})]})}}]);
//# sourceMappingURL=547.df9046d4.chunk.js.map