"use strict";(self.webpackChunktest_task_frontend=self.webpackChunktest_task_frontend||[]).push([[568],{278:(t,e,a)=>{a.d(e,{_e:()=>i,TJ:()=>r,_5:()=>n,_z:()=>o,wi:()=>c});const s=a(213).A.create({baseURL:"http://localhost:8080/api/chats"}),n=async()=>{const{data:t}=await s.get("/");return t},r=async t=>{const{data:e}=await s.get(`/${t}`);return e},c=async(t,e)=>{const{data:a}=await s.put(`/${t}`,e);return a},i=async t=>{const{data:e}=await s.delete(`/${t}`);return e},o=async(t,e)=>{const{data:a}=await s.post(`/${t}/messages`,e);return a}},568:(t,e,a)=>{a.r(e),a.d(e,{default:()=>i});var s=a(43),n=a(216),r=a(278),c=a(579);const i=()=>{const{id:t}=(0,n.g)(),[e,a]=(0,s.useState)(null),[i,o]=(0,s.useState)("");(0,s.useEffect)((()=>{const e=async()=>{try{const e=await(0,r.TJ)(t);a(e)}catch(e){console.error(e)}};e();const s=setInterval(e,1e3);return()=>clearInterval(s)}),[t]);const d=t=>{const e=new Date(t);return`${e.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})} ${e.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}`};return e?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("h1",{children:[e.firstName," ",e.lastName]}),e.messages&&e.messages.length>0?e.messages.map((t=>{let{_id:e,text:a,createdAt:s}=t;return(0,c.jsxs)("p",{children:[a," ",(0,c.jsx)("br",{}),d(s)]},e)})):(0,c.jsx)("p",{children:"Start chat"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("input",{type:"text",value:i,onChange:t=>{o(t.target.value)},placeholder:"Type your message"}),(0,c.jsx)("button",{onClick:async()=>{if(i)try{await(0,r._z)(t,{text:i,sender:`${e.firstName} ${e.lastName}`}),o("")}catch(a){console.error(a)}},children:"Send"})]})]}):(0,c.jsx)("div",{children:"Loading..."})}}}]);
//# sourceMappingURL=568.d72e2250.chunk.js.map